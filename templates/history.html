{% extends "layout.html" %}
{% block content %}

<h3 class="mb-4">Riwayat Pesanan Saya</h3>

{% if not history %}
  <div class="alert alert-info shadow-sm">Belum ada pesanan.</div>

{% else %}
  <div class="card shadow-sm fade-in">
    <div class="card-body p-0">

      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>Tanggal & Waktu</th>
            <th>Detail Barang</th>
            <th>Total Bayar</th>
            <th>Status</th>
            <th>Blockchain</th>
          </tr>
        </thead>

        <tbody>
          {% for tx in history %}
          <tr>
            <td>{{ tx.timestamp|datetime_format }}</td>

            <td>
              {% for it in tx.items_list %}
                <span class="badge bg-secondary text-white me-1">{{ it }}</span>
              {% endfor %}
            </td>

            <td>Rp {{ "{:,}".format(tx.total) }}</td>

            <td><span class="badge bg-success">Selesai</span></td>

            <td>Block #{{ tx.block_index }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

    </div>
  </div>
{% endif %}

{% endblock %}
